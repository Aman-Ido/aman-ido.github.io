<!DOCTYPE HTML>
<html>
  <head>
    <!-- title and icons -->
    <title>ASCII Bitmap Font Generator</title>
    <link rel="icon" href="./page_icon.jpg">
    
    <!-- meta data so that search engines can find this page -->
    <meta charset="UTF-8">
    <meta name="title" content="Bitmap font generator | generate fonts | bitmap">
    <meta name="description" content="free bitmap font generator using google fonts generate your font now!">
    <meta name="author" content="Aman-Ido.github.io">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    
    <!-- css styling -->
    <style>

      /* this is for the container - or all the boxes */
      .container {
        border: 1px solid black;
        border-radius: 7px;
        padding: 10px;
        font-family: consolas;
      }
      
      /* for all the inputs fields */
      input {
        margin: 10px;
      }
      
      /* for all the buttons */
      button {
        font-size: 24px;
      }
      
      /* only the generate bitmap font button */
      #generate_setting {
        padding: 10px;
        border-radius: 7px;
        border: 2px solid orange;
      }
      
      /* only the default bitmap font button */
      #default_setting {
        padding: 10px;
        border-radius: 7px;
        border: 2px solid blue;
      }
    </style>
  </head>
  <body>
    <!-- the header container - where you change the settings, like font family, size, color etcetra -->
    <form class="container" id="setting_container">
      <!-- the header 'bitmap font' -->
      <h3 style="text-align: center;">Bitmap Font <font color="red">Generator</font></h3>
      
      <hr> <!-- line -->
      
      <!-- prompt / info -->
      <h6 style="border: 1px solid blue;border-radius: 7px;"><i><font color="red">
        If you want to add google fonts, <font color="blue">(e.g. <u>follow the placeholder in the textarea or</u>)</font><a href="help_page.html" target="_blank">Go to Help Page</a>
      </font> paste the link here: 
      
      <!-- text area with informative placeholder value -->
      <textarea id="link_input" placeholder='<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=BBH+Bartle&display=swap" rel="stylesheet">' 
      rows="3" cols="100"></textarea>
      
      <!-- this button will set the google font / download the google font -->
      <button id="google_font_button">Set the google font</button></i></h6>
      
      <hr> <!-- line -->
      
      <!-- font size input -->
      <label for="font_size_input">Enter the font size : </label>
      <input name="font_size_input" id="font_size_input" type="number" placeholder="24"><br>
      
      <!-- font family input -->
      <label for="font_family_input">Enter the font family : </label>
      <input name="font_family_input" id="font_family_input" placeholder="consolas"><br>
      
      <!-- font color input -->
      <label for="font_color_input">Enter the font color : </label>
      <input name="font_color_input" id="font_color_input" placeholder="blue"><br>
      
      <!-- font weight input -->
      <label for="font_weight_input">Enter the font weight : </label>
      <select name="font_weight_input" id="font_weight_input">
        <option value="">-- Nothing --</option>
        <option value="bold">Bold</option>
        <option value="italic">Italic</option>
        <option value="bold italic">Bold Italic</option>
      </select> <br> <br>
      
      <!-- border -->
      <label for="show_border">Show Border ? : </label>
      <select name="show_border" id="show_border_input">
        <option value="show">YES</option>
        <option value="dshow">NO</option>
      </select> <br> <br>
      
      <!-- full and half -->
      <label for="full_half">Full / Half Grid ? :</label>
      <select name="full_half" id="full_half_input">
        <option value="full">Show Full Grid (16x16)</option>
        <option value="half">Show Half Grid (16x8)</option>
      </select> <br> <br>
      
      <!-- default = generate with default settings -->
      <button id="default_setting" class="button">Default Bitmap Font</button> <br> <br><br>
      <!-- generate = generate from the inputted values -->
      <button id="generate_setting" class="button">Generate Bitmap Font</button> <br><i>Press twice if you are using google fonts</i>
    </form>
    
    <br><br>
    
    <!-- this is for the grid drawing -->
    <canvas id="canvas"></canvas><br><br>
    
    <br><br><hr>
    
    <!-- this button will save a png image - with alpha channel in your default download folder -->
    <button id="save_button">Download / Save Image</button>
      
    </div>
    
    <!-- javascript to get the elements by their id -->
    <script>
      // these are the default settings for generating the font
      let font_size = 24;
      let font_family = "consolas";
      let font_color = "black";
      let font_weight = "";
      let show_border = "dshow";
    
      const font_color_input = document.getElementById ("font_color_input");
      const font_family_input = document.getElementById ("font_family_input");
      const font_size_input = document.getElementById ("font_size_input");
      const font_weight_input = document.getElementById ("font_weight_input");
      const show_border_input = document.getElementById ("show_border_input");
      const full_half_input = document.getElementById ("full_half_input");
      
      const link_input = document.getElementById ("link_input");
      
      const setting_container = document.getElementById ("setting_container");
      const generate_setting = document.getElementById ("generate_setting");
      const default_setting = document.getElementById ("default_setting");
      
      document.getElementById("google_font_button").addEventListener ("click", (e) => {
        e.preventDefault ();
        const fragment = document.createRange().createContextualFragment(link_input.value);
        document.head.append (fragment);
      })
    </script>
    
    <!-- script -->
    <script>
      function drawGrid () {
        
        let index = 0;
        
        
        document.fonts.ready.then (() => {
        
          for (let i = 0; i < 16; i++) {
            for (let j = 0; j < 16; j++) {
              // here
              let col = (j * font_size);
              let row = (i * font_size);
              ctx.fillText (String.fromCharCode (index), col, row);
              index++;
            }
          }
        })
      }
      
      function drawGrid_half () {
        let index = 32;
        
        document.fonts.ready.then (() => {
          for (let i = 0; i < 6; i++) {
            for (let j = 0; j < 16; j++) {
              let col = (j * font_size);
              let row = (i * font_size);
              
              ctx.fillText (String.fromCharCode (index), col, row);
              
              index++;
            }
          }
        })
      }
     
      
      let Canvas_Width = font_size * 16;
      let Canvas_Height = font_size * 16;
      
      const canvas = document.getElementById ("canvas");
      const ctx = canvas.getContext ("2d", {alpha: true});
      
      canvas.width = Canvas_Width;
      canvas.height = Canvas_Height;
      
      
      function update_width_height (i_full_half) {
        
        // updating the canvas size
        Canvas_Width = font_size * 16;
        
        if (i_full_half == "half") {
        
          Canvas_Height = font_size  * 6;
        } else {
          Canvas_Height = font_size * 16;
        
        }
        
        canvas.width = Canvas_Width;
        canvas.height = Canvas_Height;
      }
      
      function update_setting () {
        // updating the settings
        if (show_border == "show") {
        
          canvas.style.border = "1px solid black";
        } else {
          canvas.style.border = "0px solid black";
        }
        
        if (font_weight != "") {
          ctx.font = `${font_weight} ${font_size}px ${font_family}`;
        } else {
          ctx.font = `${font_size}px ${font_family}`;
        }
        
        ctx.fillStyle = font_color;
      }
      
      
      
      
      generate_setting.addEventListener ("click", function (e) {
        e.preventDefault ();
        
        
        
        // clearing the canvas
        ctx.clearRect (0, 0, Canvas_Width, Canvas_Height);
        
        // setting the value
        show_border = show_border_input.value;
        font_size = font_size_input.value;
        font_family = font_family_input.value;
        font_weight = font_weight_input.value;
        font_color = font_color_input.value;
        
        
        
        
        // calling the grid
        if (full_half_input.value == "full") {
          update_width_height ("full");
          update_setting ();
          
          ctx.textBaseline = "top";
          drawGrid ();
        } else {
          update_width_height ("half");
          update_setting ();
          
          ctx.textBaseline = "top";
          
          drawGrid_half ();
        }
        
        
        window.scrollTo (0, document.body.scrollHeight);
      })
      
      
      <!-- listening for click in default button -->
      default_setting.addEventListener ("click", function (e) {
        e.preventDefault ();
        
        
        
        // clearing the canvas
        ctx.clearRect (0, 0, Canvas_Width, Canvas_Height);
        
        // setting the value
        font_size = 24;
        font_family = "consolas";
        font_color = "black";
        font_weight = "";
        show_border = "dshow";
        

        
        // calling the grid
        if (full_half_input.value == "full") {
          update_width_height ("full");
          update_setting ();
          
          ctx.textBaseline = "top";
          drawGrid ();
        } else {
          update_width_height ("half");
          update_setting ();
          
          ctx.textBaseline = "top";
          drawGrid_half ();
        }
        window.scrollTo (0, document.body.scrollHeight);
      })

    </script>
    
    
    <!-- function to save the image -->
    <script>
      // this is for the saving
      const save_button = document.getElementById ("save_button");
      
      save_button.addEventListener ("click", function (e) {
        e.preventDefault ();
        
        canvas.toBlob ((blob) => {
          const url = URL.createObjectURL (blob);
          const link = document.createElement ('a');
          link.href = url;
          link.download = "bitmap-image.png";
          link.click ();
          
          // cleanup the memory used by the url
          URL.revokeObjectURL (url);
          link.remove ();
        }, 'image/png');
      })
    </script>
  </body>
</html>